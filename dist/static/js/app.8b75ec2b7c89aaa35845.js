webpackJsonp([17],{"34KM":function(e,n){},"4qN4":function(e,n){},AzfT:function(e,n){},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("MVMM"),o=t("4YfN"),r=t.n(o),i=[{name:"登录",path:"/login",id:1},{name:"设置",path:"/setting",id:2},{name:"收藏",path:"/",id:3},{name:"帮助",path:"/",id:4}],s=[{name:"首页",path:"/",id:5},{name:"采购订单",path:"/purchaseOrder",id:6},{name:"发票管理",path:"/invoice",id:7},{name:"应收帐款",path:"/due",id:10}],c=[{name:"贴现申请",path:"/beforemoney",id:8},{name:"资金计划",path:"/plan",id:9}],u=t("9rMa"),l=t("rVsN"),d=t.n(l),m=t("2sCs"),v=t.n(m),p=t("x4un"),f=t.n(p),h=void 0;function _(){h.close()}var g=t("T452"),b={token:function(e){return e.user.token},avatar:function(e){return e.user.avatar},name:function(e){return e.user.name},roles:function(e){return e.user.roles},isSetNav:function(e){return e.nav.isSetNav},nav:function(e){return e.nav.navAll}},N=t("uAC3"),T=t.n(N),A="suppliersess_id";var O={state:{token:"",name:"",roles:""},mutations:{SET_TOKEN:function(e,n){e.token=n},SET_NAME:function(e,n){e.name=n},SET_ROLES:function(e,n){e.roles=n}},actions:{Login:function(e,n){var t=e.commit;return new d.a(function(e){var a,o;(a=n.user,o=n.pwd,k({url:"/user/login",method:"POST",data:{FUserName:a,FPassWord:o}})).then(function(n){var a;t("SET_TOKEN",n.data.suppliersess_id),a=n.data.suppliersess_id,T.a.set(A,a),e(n)}).catch(function(e){console.log(e)})})},userInfo:function(e){var n=e.commit;return new d.a(function(e){k({url:"/user/getuserinfo",method:"POST"}).then(function(t){n("SET_ROLES",t.data.role_id),n("SET_NAME",t.data.user_name),e(t)}).catch(function(e){console.log(e)})})},FedLogOut:function(e){var n=e.commit;return new d.a(function(e){n("SET_TOKEN",""),T.a.remove(A),e()})}},getters:{}},E={state:{navAll:s},mutations:{SET_NAV:function(e,n){e.navAll=n},SETNAV_STATUS:function(e,n){e.isSetNav=n}},actions:{pushNav:function(e,n){var t=e.commit;return new d.a(function(e,a){if("1"==n){var o=s.concat(c);t("SET_NAV",o)}else t("SET_NAV",s);e()})}}};a.default.use(u.a);var S=new u.a.Store({modules:{user:O,nav:E},getters:b}),w=t("DEjr"),C=t.n(w);console.log(Object({NODE_ENV:"production",API_ROOT:"/"}));var P=v.a.create({baseURL:"/",timeout:15e3});P.interceptors.request.use(function(e){return e.data=C.a.stringify(e.data),e.headers["Content-type"]="application/x-www-form-urlencoded;charset=UTF-8",h=p.Loading.service({lock:!0,text:"加载中……",background:"rgba(0, 0, 0, 0.7)"}),e},function(e){console.log(e),d.a.reject(e)}),P.interceptors.response.use(function(e){_();var n=e.data;return n.code!==g.b?(Object(p.Message)({message:n.msg,type:"error",duration:5e3}),n.code!==g.a.LOGIN_CODE&&50012!==n.code&&50014!==n.code||S.dispatch("FedLogOut").then(function(){location.reload()}),d.a.reject("error")):e.data},function(e){return _(),console.log("err"+e),Object(p.Message)({message:e.message,type:"error",duration:5e3}),d.a.reject(e)});var k=P;var x={name:"Mheader",data:function(){return{headerTop:i,navActive:1}},computed:r()({},Object(u.b)({nav:function(e){return e.nav.navAll},userName:function(e){return e.user.name}})),watch:{$route:function(e){this.getRouterActive(e)}},mounted:function(){this.getRouterActive()},methods:{getRouterActive:function(e){var n=e||this.$route;this.navActive=n.meta.id||0},loginOut:function(){(void 0)()}}},y={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"m-header"},[t("div",{staticClass:"line"}),e._v(" "),t("div",{staticClass:"header-top page-w block-center flex just-center"},[t("div"),e._v(" "),t("div",{staticClass:"top-nav flex"},[""!=e.userName?t("div",{staticClass:"flex"},[t("div",[e._v("您好,"+e._s(e.userName))]),e._v(" "),t("div",{staticClass:"hover-color shoushi",staticStyle:{margin:"0 10px"},on:{click:e.loginOut}},[e._v("退出")])]):e._e(),e._v(" "),e._l(e.headerTop,function(n){return 1!=n.id||""==e.userName?t("div",{staticClass:"top-nav-item shoushi "},[t("div",{staticClass:"hover-color",class:e.navActive==n.id?"active ":""},[t("router-link",{attrs:{to:n.path}},[e._v(e._s(n.name))])],1)]):e._e()})],2)]),e._v(" "),t("div",{staticClass:"header-nav page-w block-center flex just-center flex-y-end"},[t("div",{staticClass:"logo"},[t("router-link",{attrs:{to:"/"}},[e._v("供应商协同门户")])],1),e._v(" "),t("div",{staticClass:"nav flex"},e._l(e.nav,function(n){return t("div",{staticClass:"nav-text shoushi hover-color",class:e.navActive==n.id?"active ":""},[t("router-link",{staticClass:"hover-color",attrs:{to:n.path}},[e._v("\n                    "+e._s(n.name)+"\n                ")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.navActive==n.id,expression:"navActive == item.id"}],staticClass:"active-bor block-center"})],1)}))])])},staticRenderFns:[]};var M={name:"App",components:{Mheader:t("Z0/y")(x,y,!1,function(e){t("kZ1h")},"data-v-60a6e528",null).exports}},L={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"app"}},[n("mheader"),this._v(" "),n("router-view")],1)},staticRenderFns:[]};var j=t("Z0/y")(M,L,!1,function(e){t("AzfT")},"data-v-321a2c28",null).exports,F=t("zO6J");a.default.use(F.a);var R=new F.a({routes:[{path:"/404",component:function(){return t.e(15).then(t.bind(null,"HLcy"))}},{path:"/login",name:"登录",component:function(){return t.e(10).then(t.bind(null,"QrVH"))},meta:{id:1}},{path:"/resetPwd",name:"重置密码",component:function(){return t.e(9).then(t.bind(null,"GQvb"))}},{path:"/",name:"首页",component:function(){return Promise.all([t.e(0),t.e(1)]).then(t.bind(null,"Fw7Z"))},meta:{id:5}},{path:"/purchaseOrder",name:"采购订单",component:function(){return Promise.all([t.e(0),t.e(7)]).then(t.bind(null,"VBkp"))},meta:{id:6}},{path:"/purchaseOrder/details",name:"订单详情",component:function(){return Promise.all([t.e(0),t.e(6)]).then(t.bind(null,"4iI5"))},meta:{id:6}},{path:"/invoice",name:"发票管理",component:function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,"TbXX"))},meta:{id:7}},{path:"/invoice/invoiceDetails",name:"发票详情",component:function(){return Promise.all([t.e(0),t.e(11)]).then(t.bind(null,"WXZk"))},meta:{id:7}},{path:"/invoice/createPoSele",name:"发票创建",component:function(){return Promise.all([t.e(0),t.e(13)]).then(t.bind(null,"IpzL"))},meta:{id:7}},{path:"/invoice/createDetails",name:"发票创建详情",component:function(){return Promise.all([t.e(0),t.e(12)]).then(t.bind(null,"sx88"))},meta:{id:7}},{path:"/beforemoney",name:"贴现申请",component:function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,"tyft"))},meta:{id:8}},{path:"/plan",name:"资金计划",component:function(){return Promise.all([t.e(0),t.e(5)]).then(t.bind(null,"c3Wv"))},meta:{id:9}},{path:"/due",name:"应收账款",component:function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,"3Bn2"))},meta:{id:10}},{path:"/message",name:"消息",component:function(){return Promise.all([t.e(0),t.e(8)]).then(t.bind(null,"Fl22"))}},{path:"/setting",name:"设置",component:function(){return Promise.all([t.e(0),t.e(14)]).then(t.bind(null,"ZN65"))},meta:{id:2}},{path:"*",redirect:"/404"}]});t("4qN4");R.beforeEach(function(e,n,t){T.a.get(A)?"/login"===e.path?t({path:"/"}):""==S.getters.roles?S.dispatch("userInfo").then(function(e){console.log(e);var n=e.data.role_id;S.dispatch("pushNav",n).then(function(){t()})}):t():"/login"===e.path?t():t("/login")});t("34KM");var V=t("lJzc"),I=t.n(V);a.default.config.productionTip=!1,a.default.use(f.a),a.default.use(I.a,{preLoad:1.3,attempt:1}),new a.default({el:"#app",router:R,store:S,components:{App:j},template:"<App/>"})},T452:function(e,n,t){"use strict";t.d(n,"b",function(){return a}),t.d(n,"c",function(){return r}),t.d(n,"a",function(){return o});var a=0,o={LOGIN_CODE:-999},r={pageSize:50}},kZ1h:function(e,n){}},["NHnr"]);
//# sourceMappingURL=app.8b75ec2b7c89aaa35845.js.map